<html>
  <%- include('./partials/head') %>
  <body>
    <%- include('./partials/header') %>
    <main>
      <% if (user) {%>
      <div>
        <p><%= user.username %>'s Drive</p>
        <button class="button-9" onclick="window.location.href='/log-out';">
          Log Out
        </button>
      </div>
      <!-- Bootstrap Modal - New Folder -->
      <%- include('./modals/new-folder-modal') %>
      <!-- Bootstrap Modal - New File -->
      <%- include('./modals/new-file-modal') %>
      <div class="folderBoard">
        <div class="title">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-folder"
            viewBox="0 0 16 16"
          >
            <path
              d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z"
            />
          </svg>
          <h5><%= folder.name %></h5>
        </div>
        <ul>
          <% subfolders.forEach( folder => { %>
          <li class="title">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-folder"
              viewBox="0 0 16 16"
            >
              <path
                d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z"
              />
            </svg>
            <%= folder.name %>
          </li>
          <% }) %>
        </ul>
        <ul class="fileList">
          <% files.forEach( file => { %>
          <li class="title">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-file"
              viewBox="0 0 16 16"
            >
              <path
                d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1"
              />
            </svg>
            <%= file.name %>
          </li>
          <% }) %>
        </ul>
      </div>
      <!-- Logged Out -->
      <% } else { %>
      <div class="login-box">
        <h2>Login</h2>
        <form action="/log-in" method="POST" autocomplete="off">
          <div class="user-box">
            <input id="username" name="username" type="text" required="" />
            <label>Username</label>
          </div>
          <div class="user-box">
            <input id="password" name="password" type="password" required="" />
            <label>Password</label>
          </div>
          <button class="button-9">Log In</button>
        </form>
        <p>Not a member? <a href="/sign-up">Sign Up</a></p>
      </div>
      <%}%>
    </main>
    <%- include('./partials/footer') %>
    <!-- Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
